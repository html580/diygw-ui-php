import{d as M,h as Q,e as U,_ as F,i as R,ag as n,aq as w,o as m,c as j,V as e,P as a,a9 as v,T as p,Q as d,O as _,U as W,W as A,a as G}from"./@vue-110897a1.js";import{l as H,r as J,k as X}from"./index-5e2104fc.js";import{E as C,a as q}from"./element-plus-28d330eb.js";import"./pinia-cd41b998.js";import"./vue-router-17193735.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const Y={class:"system-user-container container"},De=M({__name:"index",setup(Z){const{proxy:f}=Q();U(null);const t=F({loading:!0,total:0,tableData:[],ids:[],single:!0,multiple:!0,title:"",statusOptions:[],queryParams:{pageNum:1,pageSize:10,loginLocation:void 0,username:void 0}}),l=()=>{t.loading=!0,H("/log/logins",t.queryParams).then(o=>{t.tableData=o.rows,t.total=o.total,t.loading=!1})},x=()=>{t.queryParams.loginLocation=void 0,t.queryParams.username=void 0,l()},D=()=>{C({message:"是否确认清空所有登录日志数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return J("/log/logins")}).then(()=>{l(),q.success("清空成功")})},P=o=>{const r=o.infoId||t.ids;C({message:'是否确认删除访问编号为"'+r+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return X("log/logins",r).then(()=>{l(),q.success("删除成功")})})},S=o=>{t.queryParams.pageSize=o,l()},B=o=>{t.queryParams.pageNum=o,l()},V=o=>f.selectDictLabel(t.statusOptions,o.status),k=o=>{t.ids=o.map(r=>r.infoId),t.single=o.length!=1,t.multiple=!o.length};return R(()=>{l(),f.getDicts("sys_common_status").then(o=>{t.statusOptions=o.rows})}),(o,r)=>{const h=n("el-input"),g=n("el-form-item"),c=n("SvgIcon"),u=n("el-button"),z=n("el-form"),y=n("el-col"),T=n("el-row"),s=n("el-table-column"),I=n("el-tag"),L=n("el-table"),N=n("el-divider"),E=n("el-pagination"),O=n("el-card"),b=w("auth"),K=w("loading");return m(),j("div",Y,[e(O,{shadow:"always"},{default:a(()=>[e(z,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[e(g,{label:"登录地点",prop:"loginLocation"},{default:a(()=>[e(h,{placeholder:"请输入登录地点模糊查询",clearable:"",onKeyup:v(l,["enter"]),style:{width:"240px"},modelValue:t.queryParams.loginLocation,"onUpdate:modelValue":r[0]||(r[0]=i=>t.queryParams.loginLocation=i)},null,8,["modelValue"])]),_:1}),e(g,{label:"用户名称",prop:"userName"},{default:a(()=>[e(h,{placeholder:"请输入用户名称模糊查询",clearable:"",onKeyup:v(l,["enter"]),style:{width:"240px"},modelValue:t.queryParams.username,"onUpdate:modelValue":r[1]||(r[1]=i=>t.queryParams.username=i)},null,8,["modelValue"])]),_:1}),e(g,null,{default:a(()=>[e(u,{type:"primary",onClick:l},{default:a(()=>[e(c,{name:"elementSearch"}),p(" 搜索 ")]),_:1}),e(u,{onClick:x},{default:a(()=>[e(c,{name:"elementRefresh"}),p(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),e(T,{gutter:10,class:"mb8"},{default:a(()=>[e(y,{span:1.5},{default:a(()=>[d((m(),_(u,{type:"danger",plain:"",disabled:t.multiple,onClick:P},{default:a(()=>[e(c,{name:"elementDelete"}),p("删除 ")]),_:1},8,["disabled"])),[[b,"log:login:delete"]])]),_:1}),e(y,{span:1.5},{default:a(()=>[d((m(),_(u,{type:"danger",plain:"",onClick:D},{default:a(()=>[e(c,{name:"elementDelete"}),p("清空 ")]),_:1})),[[b,"log:login:clean"]])]),_:1})]),_:1}),d((m(),_(L,{border:"",data:t.tableData,onSelectionChange:k},{default:a(()=>[e(s,{type:"selection",width:"55",align:"center"}),e(s,{label:"访问编号",align:"center",prop:"infoId"}),e(s,{label:"用户名称",align:"center",prop:"username"}),e(s,{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),e(s,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(s,{label:"浏览器",align:"center",prop:"browser"}),e(s,{label:"操作系统",align:"center",prop:"os"}),e(s,{label:"登录状态",align:"center",prop:"status"},{default:a(i=>[e(I,{type:i.row.status==="1"?"success":"danger","disable-transitions":""},{default:a(()=>[p(W(V(i.row)),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"登录时间",align:"center",prop:"createTime","show-overflow-tooltip":!0})]),_:1},8,["data"])),[[K,t.loading]]),d(G("div",null,[e(N),e(E,{background:"",total:t.total,"current-page":t.queryParams.pageNum,"page-sizes":[10,20,30,40],"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:B},null,8,["total","current-page","page-size"])],512),[[A,t.total>0]])]),_:1})])}}});export{De as default};
