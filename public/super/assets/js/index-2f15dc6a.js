import{d as T,h as S,e as F,_ as R,i as U,Z as $,ag as n,aq as w,o as s,c as k,V as e,P as o,a9 as L,F as Q,a8 as K,O as c,T as r,Q as _,U as j,S as A}from"./@vue-110897a1.js";import{_ as Z}from"./editModule.vue_vue_type_script_setup_true_lang-71873d15.js";import{l as z,j as G,k as H}from"./index-5e2104fc.js";import{E as J,a as W}from"./element-plus-28d330eb.js";import"./pinia-cd41b998.js";import"./vue-router-17193735.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const X={class:"container"},Ve=T({__name:"index",setup(Y){const{proxy:f}=S(),h=F(),t=R({loading:!0,title:"",tableData:[],statusOptions:[],queryParams:{deptName:void 0,status:void 0}}),i=()=>{t.loading=!0,z("/sys/dept",t.queryParams).then(a=>{t.tableData=G(a.rows,"deptId","parentId","children"),t.loading=!1})},C=()=>{t.queryParams.deptName=void 0,t.queryParams.status=void 0,i()},D=a=>f.selectDictLabel(t.statusOptions,a.status),g=a=>{let d=a.deptId;a=[],a.parentId=d,t.title="添加部门",h.value.openDialog(a)},x=a=>{t.title="修改部门",h.value.openDialog(a)},P=a=>{J({message:'是否确认删除名称为"'+a.deptName+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return H("/sys/dept",a.deptId).then(()=>{i(),W.success("删除成功")})})};return U(()=>{i(),f.getDicts("sys_normal_disable").then(a=>{t.statusOptions=a.rows}),f.mittBus.on("onEditDeptModule",a=>{i()})}),$(()=>{f.mittBus.off("onEditDeptModule")}),(a,d)=>{const V=n("el-input"),b=n("el-form-item"),q=n("el-option"),I=n("el-select"),p=n("SvgIcon"),m=n("el-button"),N=n("el-form"),u=n("el-table-column"),B=n("el-tag"),M=n("el-table"),E=n("el-card"),y=w("auth"),O=w("loading");return s(),k("div",X,[e(E,{shadow:"always"},{default:o(()=>[e(N,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(b,{label:"部门名称",prop:"deptName"},{default:o(()=>[e(V,{placeholder:"请输入部门名称模糊查询",clearable:"",onKeyup:L(i,["enter","native"]),modelValue:t.queryParams.deptName,"onUpdate:modelValue":d[0]||(d[0]=l=>t.queryParams.deptName=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"状态",prop:"status"},{default:o(()=>[e(I,{modelValue:t.queryParams.status,"onUpdate:modelValue":d[1]||(d[1]=l=>t.queryParams.status=l),placeholder:"部门状态",clearable:""},{default:o(()=>[(s(!0),k(Q,null,K(t.statusOptions,l=>(s(),c(q,{key:l.dictValue,label:l.dictLabel,value:l.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(m,{type:"primary",onClick:i},{default:o(()=>[e(p,{name:"ele-Search"}),r(" 搜索 ")]),_:1}),e(m,{onClick:C},{default:o(()=>[e(p,{name:"ele-Refresh"}),r(" 重置 ")]),_:1}),_((s(),c(m,{type:"primary",plain:"",onClick:g},{default:o(()=>[e(p,{name:"ele-Plus"}),r(" 新增 ")]),_:1})),[[y,"system:dept:add"]])]),_:1})]),_:1},8,["model"]),_((s(),c(M,{data:t.tableData,"row-key":"deptId",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[e(u,{prop:"deptName",label:"部门名称",width:"260"}),e(u,{prop:"createTime",label:"创建时间",width:"300"}),e(u,{prop:"orderNum",label:"排序",width:"200"}),e(u,{prop:"status",label:"状态",width:"100"},{default:o(l=>[e(B,{type:l.row.status==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[r(j(D(l.row)),1)]),_:2},1032,["type"])]),_:1}),e(u,{label:"负责人",align:"center",prop:"leader",width:"200"}),e(u,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:o(l=>[_((s(),c(m,{type:"text",onClick:v=>x(l.row)},{default:o(()=>[e(p,{name:"ele-Edit"}),r("修改 ")]),_:2},1032,["onClick"])),[[y,"system:dept:edit"]]),_((s(),c(m,{type:"text",onClick:v=>g(l.row)},{default:o(()=>[e(p,{name:"ele-Plus"}),r("新增 ")]),_:2},1032,["onClick"])),[[y,"system:dept:add"]]),l.row.parentId!=0?_((s(),c(m,{key:0,type:"text",onClick:v=>P(l.row)},{default:o(()=>[e(p,{name:"ele-Delete"}),r("删除 ")]),_:2},1032,["onClick"])),[[y,"system:dept:delete"]]):A("",!0)]),_:1})]),_:1},8,["data"])),[[O,t.loading]])]),_:1}),e(Z,{ref_key:"editModuleRef",ref:h,title:t.title},null,8,["title"])])}}});export{Ve as default};
