import{d as re,h as ce,_ as ue,$ as me,e as pe,i as _e,Z as ge,ag as d,aq as E,o as r,c as k,a as n,V as t,P as a,u as i,T as u,Q as f,O as p,S as z,W as fe,F as ye,a8 as he,U as ve,D as be,bi as xe,bg as we}from"./@vue-110897a1.js";import{g as F,h as Ce,i as De,l as ke,k as Fe,n as Se,_ as Ve}from"./index-5e2104fc.js";import{a as S,E as I}from"./element-plus-28d330eb.js";import"./pinia-cd41b998.js";import"./vue-router-17193735.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const M=b=>(xe("data-v-c979773a"),b=b(),we(),b),Pe={class:"container"},qe=M(()=>n("div",{class:"diygw-title diygw-top solid-bottom",style:{color:"white",background:"#07c160"}},[n("div",{class:"title flex1 text-center"})],-1)),Be={class:"flex flex-wrap diygw-col-24 flex-direction-column flex-clz"},Re={class:"flex el-card is-always-shadow diygw-col-24"},Ue={class:"flex flex-direction-column flex1 el-card__body"},Ee={class:"mb8"},ze={class:"flex diygw-col-24"},Ie={class:"flex diygw-col-0"},Me={class:"mb8"},Te={class:"flex diygw-col-24"},Ne=["src"],Le={class:"flex diygw-col-24"},Oe={class:"flex diygw-col-24"},Qe={class:"flex diygw-col-24"},$e={class:"dialog-footer"},We=M(()=>n("div",{class:"clearfix"},null,-1)),je=re({__name:"article",props:{title:{type:String,default:()=>""}},setup(b){const{proxy:x}=ce(),e=ue({loading:!0,ids:[],single:!0,multiple:!0,title:"",total:0,tableData:[],isShowDialog:!1,saveloading:!1,editFormData:{statusDatas:[{value:"1",label:"显示",checked:!0},{value:"0",label:"隐藏",checked:!1}]},queryParams:{pageNum:1,pageSize:10,title:""},queryParamsRules:{},editForm:{id:void 0,thumb:[],title:"",url:"",status:""},editFormRules:{}}),{editFormData:T,queryParams:V,multiple:Ae,tableData:Ze,loading:Ge,title:He,editFormRules:Je,single:Ke,total:Xe,isShowDialog:w,queryParamsRules:N,editForm:c,ids:Ye,saveloading:et}=me(e),P=pe(null),L=F(e.editForm),q=l=>{l.id&&l.id!=null&&l.id!=0?e.editForm=l:$(),e.isShowDialog=!0,e.saveloading=!1},C=l=>{x.mittBus.emit("onEditCategoryModule",l),e.isShowDialog=!1},O=()=>{C()},Q=()=>{const l=i(P);l&&l.validate(o=>{o&&(e.saveloading=!0,e.editForm.id!=null&&e.editForm.id!=0?Ce("/cms/category",e.editForm).then(()=>{S.success("修改成功"),e.saveloading=!1,C(e.editForm)}).finally(()=>{e.saveloading=!1}):De("/cms/category",e.editForm).then(()=>{S.success("新增成功"),e.saveloading=!1,C(e.editForm)}).finally(()=>{e.saveloading=!1}))})},$=()=>{e.editForm=F(L)},W=F(e.queryParams),_=()=>{e.loading=!0,ke("/cms/category",e.queryParams).then(l=>{e.tableData=l.rows,e.total=l.total,e.loading=!1})},j=()=>{e.queryParams=W,_()},A=l=>{l=[],e.title="添加分类管理",q(l)},Z=l=>{e.title="修改分类管理",q(l)},B=l=>{const o=l.id||e.ids;I({message:'是否确认删除分类管理编号为"'+o+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Fe("/cms/category",o).then(()=>{_(),S.success("删除成功")})})},G=l=>{e.ids=l.map(o=>o.id),e.single=l.length!=1,e.multiple=!l.length},H=()=>{const l=e.queryParams;I({message:"是否确认导出所有分类管理",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Se("/cms/category",l)}).then(o=>{x.download(o.data)})},J=l=>{e.queryParams.pageSize=l,_()},K=l=>{e.queryParams.pageNum=l,_()},X=async()=>{};return _e(()=>{_(),x.mittBus.on("onEditCategoryModule",()=>{_()}),X()}),ge(()=>{x.mittBus.off("onEditCategoryModule")}),(l,o)=>{const D=d("el-input"),h=d("el-form-item"),g=d("SvgIcon"),m=d("el-button"),R=d("el-form"),y=d("el-table-column"),Y=d("el-table"),ee=d("el-divider"),te=d("el-pagination"),le=d("Plus"),ae=d("el-icon"),oe=d("el-upload"),se=d("el-radio"),ie=d("el-radio-group"),ne=d("el-dialog"),v=E("auth"),de=E("loading");return r(),k("div",Pe,[qe,n("div",Be,[n("div",Re,[n("div",Ue,[n("div",Ee,[t(R,{class:"",model:e.queryParams,rules:i(N),ref:"queryForm","label-width":"80px"},{default:a(()=>[n("div",ze,[t(h,{class:"diygw-el-rate",label:"标题"},{default:a(()=>[t(D,{type:"text",placeholder:"请输入标题关键字",modelValue:i(V).title,"onUpdate:modelValue":o[0]||(o[0]=s=>i(V).title=s)},null,8,["modelValue"])]),_:1})]),n("div",Ie,[t(m,{type:"primary",onClick:_},{default:a(()=>[t(g,{name:"ele-Search"}),u(" 搜索 ")]),_:1}),t(m,{onClick:j},{default:a(()=>[t(g,{name:"ele-Refresh"}),u(" 重置 ")]),_:1})])]),_:1},8,["model","rules"])]),n("div",Me,[f((r(),p(m,{type:"primary",plain:"",onClick:A},{default:a(()=>[t(g,{name:"ele-Plus"}),u("新增 ")]),_:1})),[[v,"cms:category:add"]]),f((r(),p(m,{type:"danger",plain:"",disabled:e.multiple,onClick:B},{default:a(()=>[t(g,{name:"ele-Delete"}),u("删除 ")]),_:1},8,["disabled"])),[[v,"cms:category:delete"]]),f((r(),p(m,{type:"warning",plain:"",onClick:H},{default:a(()=>[t(g,{name:"ele-Download"}),u("导出 ")]),_:1})),[[v,"cms:category:export"]])]),f((r(),p(Y,{onSelectionChange:G,data:e.tableData,stripe:"",border:"","empty-text":"没有数据",style:{width:"100%"}},{default:a(()=>[t(y,{type:"selection",width:"55",align:"center"}),t(y,{label:"图标",prop:"thumb"}),t(y,{label:"标题",prop:"title"}),t(y,{label:"URL",prop:"url"}),t(y,{label:"状态",prop:"status"}),t(y,{label:"操作",align:"center",fixed:"right",width:"180"},{default:a(s=>[f((r(),p(m,{type:"text",onClick:U=>Z(s.row)},{default:a(()=>[t(g,{name:"ele-Edit"}),u("修改 ")]),_:2},1032,["onClick"])),[[v,"cms:category:edit"]]),s.row.id!=0?f((r(),p(m,{key:0,type:"text",onClick:U=>B(s.row)},{default:a(()=>[t(g,{name:"ele-Delete"}),u("删除 ")]),_:2},1032,["onClick"])),[[v,"cms:category:delete"]]):z("",!0)]),_:1})]),_:1},8,["data"])),[[de,e.loading]]),f(n("div",null,[t(ee),t(te,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:J,onCurrentChange:K},null,8,["total","current-page","page-size"])],512),[[fe,e.total>0]])]),t(ne,{modelValue:i(w),"onUpdate:modelValue":o[5]||(o[5]=s=>be(w)?w.value=s:null),width:"769px",title:"分类管理",draggable:"",center:""},{footer:a(()=>[n("div",$e,[t(m,{onClick:O},{default:a(()=>[u(" 取 消 ")]),_:1}),t(m,{type:"primary",onClick:Q,loading:e.saveloading},{default:a(()=>[u(" 编 辑 ")]),_:1},8,["loading"])])]),default:a(()=>[t(R,{class:"flex flex-direction-row flex-wrap",model:e.editForm,rules:e.editFormRules,ref_key:"editFormRef",ref:P,"label-width":"80px"},{default:a(()=>[n("div",Te,[t(h,{class:"diygw-el-rate",label:"图标"},{default:a(()=>[l.uploadType=="picture"?(r(),p(oe,{key:0,class:"avatar-uploader","file-list":i(c).thumb,"onUpdate:fileList":o[1]||(o[1]=s=>i(c).thumb=s),"show-file-list":!1,accept:"image/*"},{default:a(()=>[i(c).thumb.length>0?(r(),k("img",{key:0,src:i(c).thumb[0],class:"avatar"},null,8,Ne)):(r(),p(ae,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[t(le)]),_:1}))]),_:1},8,["file-list"])):z("",!0)]),_:1})]),n("div",Le,[t(h,{class:"diygw-el-rate",label:"名称"},{default:a(()=>[t(D,{type:"text",placeholder:"请输入分类名称",modelValue:i(c).title,"onUpdate:modelValue":o[2]||(o[2]=s=>i(c).title=s)},null,8,["modelValue"])]),_:1})]),n("div",Oe,[t(h,{class:"diygw-el-rate",label:"URL"},{default:a(()=>[t(D,{type:"text",placeholder:"请输入Url 留空默认跳转",modelValue:i(c).url,"onUpdate:modelValue":o[3]||(o[3]=s=>i(c).url=s)},null,8,["modelValue"])]),_:1})]),n("div",Qe,[t(h,{class:"diygw-el-rate",label:"状态"},{default:a(()=>[t(ie,{modelValue:i(c).status,"onUpdate:modelValue":o[4]||(o[4]=s=>i(c).status=s)},{default:a(()=>[(r(!0),k(ye,null,he(i(T).statusDatas,(s,U)=>(r(),p(se,{label:s.value},{default:a(()=>[u(ve(s.label),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])]),We])}}});const St=Ve(je,[["__scopeId","data-v-c979773a"]]);export{St as default};
