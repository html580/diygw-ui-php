import{f as C,u as I,e as v,S as P,b as B}from"./index-5e2104fc.js";import{d as V,_ as x,j as u,G as E,n as h,i as D,Z as O,f as S,ag as b,o as l,c as M,V as o,P as f,X as _,O as d,Q as w,W as R,R as Q,aB as U,u as j,aQ as G}from"./@vue-110897a1.js";import{u as W,b as X}from"./vue-router-17193735.js";import{s as y}from"./pinia-cd41b998.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./element-plus-28d330eb.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";const Z={class:"layout-parent"},q=V({name:"layoutParentView"}),Ve=V({...q,setup(z){const g=G(()=>B(()=>import("./iframes-a5b3dd8a.js"),["assets/js/iframes-a5b3dd8a.js","assets/js/@vue-110897a1.js","assets/js/vue-router-17193735.js"])),a=W(),K=X(),A=C(),L=I(),{keepAliveNames:r,cachedViews:p}=y(A),{themeConfig:m}=y(L),e=x({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),n=u(()=>m.value.animation),T=u(()=>m.value.isTagsview?p.value:e.keepAliveNameList),c=u(()=>a.meta.isIframe),k=async()=>{K.getRoutes().forEach(t=>{t.meta.isIframe&&(t.meta.isIframeOpen=!1,t.meta.loading=!0,e.iframeList.push({...t}))})};return E(()=>{e.keepAliveNameList=r.value,v.on("onTagsViewRefreshRouterView",t=>{e.keepAliveNameList=r.value.filter(s=>a.name!==s),e.refreshRouterViewKey="",e.iframeRefreshKey="",h(()=>{e.refreshRouterViewKey=t,e.iframeRefreshKey=t,e.keepAliveNameList=r.value})})}),D(()=>{k(),h(()=>{setTimeout(()=>{if(m.value.isCacheTagsView){let t=P.get("tagsViewList")||[];p.value=t.filter(s=>{var i;return(i=s.meta)==null?void 0:i.isKeepAlive}).map(s=>s.name)}},0)})}),O(()=>{v.off("onTagsViewRefreshRouterView",()=>{})}),S(()=>a.fullPath,()=>{e.refreshRouterViewKey=decodeURI(a.fullPath)},{immediate:!0}),(t,s)=>{const i=b("router-view");return l(),M("div",Z,[o(i,null,{default:f(({Component:N})=>[o(_,{name:n.value,mode:"out-in"},{default:f(()=>[(l(),d(U,{include:T.value},[w((l(),d(Q(N),{key:e.refreshRouterViewKey,class:"w100"})),[[R,!c.value]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),o(_,{name:n.value,mode:"out-in"},{default:f(()=>[w(o(j(g),{class:"w100",refreshKey:e.iframeRefreshKey,name:n.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[R,c.value]])]),_:1},8,["name"])])}}});export{Ve as default};
