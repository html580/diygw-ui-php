import{h as S,i as C}from"./index-5e2104fc.js";import{a as _}from"./element-plus-28d330eb.js";import{d as K,h as U,e as B,_ as O,ag as t,aq as R,o as u,c as f,V as a,P as n,Q as q,T as m,U as y,a as E,F as M,a8 as L,O as P,u as w}from"./@vue-110897a1.js";const z={class:"system-menu-container"},Q={style:{"font-size":"large"}},W={class:"dialog-footer"},H=K({__name:"editModule",props:{title:{type:String,default:()=>""}},setup(F,{expose:V}){const{proxy:c}=U(),g=B(null),e=O({isShowDialog:!1,loading:!1,ruleForm:{configId:0,configName:"",configKey:"",configValue:"",configType:"",remark:""},typeOptions:[],ruleRules:{dictName:[{required:!0,message:"配置参数名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"配置参数类型不能为空",trigger:"blur"}]}}),b=o=>{o.configId&&o.configId!=null&&o.configId!=0?(e.ruleForm=o,e.ruleForm.configId=o.configId,e.ruleForm.configName=o.configName,e.ruleForm.configKey=o.configKey,e.ruleForm.configValue=o.configValue,e.ruleForm.configType=o.configType,e.ruleForm.remark=o.remark):h(),e.isShowDialog=!0,e.loading=!1,c.getDicts("sys_yes_no").then(l=>{e.typeOptions=l.rows})},d=o=>{c.mittBus.emit("onEditPostModule",o),e.isShowDialog=!1},k=()=>{d()},D=()=>{const o=w(g);o&&o.validate(l=>{l&&(e.loading=!0,e.ruleForm.configId!=null&&e.ruleForm.configId!=0?S("/sys/config",e.ruleForm).then(i=>{_.success("修改成功"),e.loading=!1,d(e.ruleForm)}).finally(()=>{e.loading=!1}):C("/sys/config",e.ruleForm).then(i=>{_.success("新增成功"),e.loading=!1,d(e.ruleForm)}).finally(()=>{e.loading=!1}))})},h=()=>{e.ruleForm.configId=0,e.ruleForm.configName="",e.ruleForm.configKey="",e.ruleForm.configValue="",e.ruleForm.configType="",e.ruleForm.remark=""};return V({openDialog:b}),(o,l)=>{const i=t("el-input"),s=t("el-form-item"),v=t("el-radio"),N=t("el-radio-group"),I=t("el-form"),p=t("el-button"),T=t("el-dialog"),x=R("drag");return u(),f("div",z,[a(T,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[5]||(l[5]=r=>e.isShowDialog=r),width:"769px",center:""},{title:n(()=>[q((u(),f("div",Q,[m(y(F.title),1)])),[[x,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])]),footer:n(()=>[E("span",W,[a(p,{onClick:k},{default:n(()=>[m("取 消")]),_:1}),a(p,{type:"primary",onClick:D,loading:e.loading},{default:n(()=>[m("编 辑")]),_:1},8,["loading"])])]),default:n(()=>[a(I,{model:e.ruleForm,rules:e.ruleRules,ref_key:"ruleFormRef",ref:g,"label-width":"80px"},{default:n(()=>[a(s,{label:"参数名称",prop:"configName"},{default:n(()=>[a(i,{modelValue:e.ruleForm.configName,"onUpdate:modelValue":l[0]||(l[0]=r=>e.ruleForm.configName=r),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),a(s,{label:"参数键名",prop:"configKey"},{default:n(()=>[a(i,{modelValue:e.ruleForm.configKey,"onUpdate:modelValue":l[1]||(l[1]=r=>e.ruleForm.configKey=r),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),a(s,{label:"参数键值",prop:"configValue"},{default:n(()=>[a(i,{modelValue:e.ruleForm.configValue,"onUpdate:modelValue":l[2]||(l[2]=r=>e.ruleForm.configValue=r),placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),a(s,{label:"系统内置",prop:"configType"},{default:n(()=>[a(N,{modelValue:e.ruleForm.configType,"onUpdate:modelValue":l[3]||(l[3]=r=>e.ruleForm.configType=r)},{default:n(()=>[(u(!0),f(M,null,L(e.typeOptions,r=>(u(),P(v,{key:r.dictValue,label:r.dictValue},{default:n(()=>[m(y(r.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"备注",prop:"remark"},{default:n(()=>[a(i,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":l[4]||(l[4]=r=>e.ruleForm.remark=r),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{H as _};
