import I from"./editModule-5ccda9fb.js";import{l as R,k as T,_ as A}from"./index-5e2104fc.js";import{E as Q,a as K}from"./element-plus-28d330eb.js";import{h as U,e as x,_ as L,i as j,Z as W,$ as Z,ag as s,aq as v,o as p,c as k,V as e,P as o,a9 as E,F as G,a8 as H,O as g,T as c,Q as C,U as J,S as X,W as Y,a as $}from"./@vue-110897a1.js";import"./pinia-cd41b998.js";import"./vue-router-17193735.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const ee={name:"index",components:{EditModule:I},setup(){const{proxy:a}=U(),r=x(),n=L({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[],queryParams:{pageNum:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0}}),l=()=>{n.loading=!0,R("/sys/post",n.queryParams).then(t=>{n.tableData=t.rows.data,n.total=t.total,n.loading=!1})},F=()=>{n.queryParams.postName=void 0,n.queryParams.postCode=void 0,n.queryParams.status=void 0,l()},w=t=>{n.queryParams.pageNum=t,l()},h=t=>{n.queryParams.pageSize=t,l()},y=t=>a.selectDictLabel(n.statusOptions,t.status),b=t=>{t=[],n.title="添加岗位",r.value.openDialog(t)},D=t=>{n.title="修改岗位",r.value.openDialog(t)},i=t=>{const m=t.postId||n.ids;Q({message:'是否确认删除岗位编号为"'+m+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return T("/sys/post",m).then(()=>{l(),K.success("删除成功")})})},d=t=>{n.ids=t.map(m=>m.postId),n.single=t.length!=1,n.multiple=!t.length};return j(()=>{l(),a.getDicts("sys_normal_disable").then(t=>{n.statusOptions=t.rows}),a.mittBus.on("onEditPostModule",()=>{l()})}),W(()=>{a.mittBus.off("onEditPostModule")}),{editModuleRef:r,handleSelectionChange:d,handleQuery:l,handleCurrentChange:w,handleSizeChange:h,resetQuery:F,statusFormat:y,onOpenAddModule:b,onOpenEditModule:D,onTabelRowDel:i,...Z(n)}}},te={class:"container"};function oe(a,r,n,l,F,w){const h=s("el-input"),y=s("el-form-item"),b=s("el-option"),D=s("el-select"),i=s("SvgIcon"),d=s("el-button"),t=s("el-form"),m=s("el-col"),P=s("el-row"),_=s("el-table-column"),B=s("el-tag"),q=s("el-table"),S=s("el-divider"),V=s("el-pagination"),M=s("el-card"),N=s("EditModule"),f=v("auth"),z=v("loading");return p(),k("div",te,[e(M,{shadow:"always"},{default:o(()=>[e(t,{model:a.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[e(y,{label:"岗位编码",prop:"postCode"},{default:o(()=>[e(h,{placeholder:"请输入岗位编码模糊查询",clearable:"",onKeyup:E(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:a.queryParams.postCode,"onUpdate:modelValue":r[0]||(r[0]=u=>a.queryParams.postCode=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(y,{label:"岗位名称",prop:"postName"},{default:o(()=>[e(h,{placeholder:"请输入岗位名称模糊查询",clearable:"",onKeyup:E(l.handleQuery,["enter"]),style:{width:"240px"},modelValue:a.queryParams.postName,"onUpdate:modelValue":r[1]||(r[1]=u=>a.queryParams.postName=u)},null,8,["onKeyup","modelValue"])]),_:1}),e(y,{label:"状态",prop:"status"},{default:o(()=>[e(D,{modelValue:a.queryParams.status,"onUpdate:modelValue":r[2]||(r[2]=u=>a.queryParams.status=u),placeholder:"岗位状态",clearable:"",style:{width:"240px"}},{default:o(()=>[(p(!0),k(G,null,H(a.statusOptions,u=>(p(),g(b,{key:u.dictValue,label:u.dictLabel,value:u.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:o(()=>[e(d,{type:"primary",onClick:l.handleQuery},{default:o(()=>[e(i,{name:"ele-Search"}),c(" 搜索 ")]),_:1},8,["onClick"]),e(d,{onClick:l.resetQuery},{default:o(()=>[e(i,{name:"ele-Refresh"}),c(" 重置 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(P,{gutter:10,class:"mb8"},{default:o(()=>[e(m,{span:1.5},{default:o(()=>[C((p(),g(d,{type:"primary",plain:"",onClick:l.onOpenAddModule},{default:o(()=>[e(i,{name:"ele-Plus"}),c("新增 ")]),_:1},8,["onClick"])),[[f,"system:post:add"]])]),_:1}),e(m,{span:1.5},{default:o(()=>[C((p(),g(d,{type:"danger",plain:"",disabled:a.multiple,onClick:l.onTabelRowDel},{default:o(()=>[e(i,{name:"ele-Delete"}),c("删除 ")]),_:1},8,["disabled","onClick"])),[[f,"system:post:delete"]])]),_:1}),e(m,{span:1.5},{default:o(()=>[C((p(),g(d,{type:"warning",plain:"",onClick:l.onTabelRowDel},{default:o(()=>[e(i,{name:"ele-Download"}),c("导出 ")]),_:1},8,["onClick"])),[[f,"system:post:export"]])]),_:1})]),_:1}),C((p(),g(q,{data:a.tableData,border:"",onSelectionChange:l.handleSelectionChange},{default:o(()=>[e(_,{type:"selection",width:"55",align:"center"}),e(_,{label:"岗位编号",align:"center",prop:"postId"}),e(_,{label:"岗位编码",align:"center",prop:"postCode"}),e(_,{label:"岗位名称",align:"center",prop:"postName"}),e(_,{label:"岗位排序",align:"center",prop:"orderNum"}),e(_,{label:"状态",align:"center",prop:"status"},{default:o(u=>[e(B,{type:u.row.status==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[c(J(l.statusFormat(u.row)),1)]),_:2},1032,["type"])]),_:1}),e(_,{label:"操作",align:"center",fixed:"right",width:"180"},{default:o(u=>[C((p(),g(d,{type:"text",onClick:O=>l.onOpenEditModule(u.row)},{default:o(()=>[e(i,{name:"ele-Edit"}),c("修改 ")]),_:2},1032,["onClick"])),[[f,"system:post:edit"]]),u.row.parentId!=0?C((p(),g(d,{key:0,type:"text",onClick:O=>l.onTabelRowDel(u.row)},{default:o(()=>[e(i,{name:"ele-Delete"}),c("删除 ")]),_:2},1032,["onClick"])),[[f,"system:post:delete"]]):X("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[z,a.loading]]),C($("div",null,[e(S),e(V,{background:"",total:a.total,"current-page":a.queryParams.pageNum,"page-size":a.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["total","current-page","page-size","onSizeChange","onCurrentChange"])],512),[[Y,a.total>0]])]),_:1}),e(N,{ref:"editModuleRef",title:a.title},null,8,["title"])])}const Se=A(ee,[["render",oe]]);export{Se as default};
