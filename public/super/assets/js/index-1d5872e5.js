import{E as c,T as h}from"./@wangeditor-231513dc.js";import{m as y}from"./@vueuse-0a258a1c.js";import{a as v}from"./uploadinput-3a2798bf.js";import{d as C,_ as S,e as b,s as z,A as H,h as B,i as V,$ as k,ag as s,o as w,c as E,V as d,K as M}from"./@vue-110897a1.js";import{_ as j}from"./index-5e2104fc.js";const L=["headerSelect","blockquote","|","bold","underline","italic",{key:"group-more-style",title:"更多",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M204.8 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M505.6 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M806.4 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path></svg>',menuKeys:["through","code","sup","sub","clearStyle"]},"color","bgColor","|","fontSize","fontFamily","lineHeight","|","bulletedList","numberedList","todo",{key:"group-justify",title:"对齐",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M768 793.6v102.4H51.2v-102.4h716.8z m204.8-230.4v102.4H51.2v-102.4h921.6z m-204.8-230.4v102.4H51.2v-102.4h716.8zM972.8 102.4v102.4H51.2V102.4h921.6z"></path></svg>',menuKeys:["justifyLeft","justifyRight","justifyCenter","justifyJustify"]},{key:"group-indent",title:"缩进",iconSvg:'<svg viewBox="0 0 1024 1024"><path d="M0 64h1024v128H0z m384 192h640v128H384z m0 192h640v128H384z m0 192h640v128H384zM0 832h1024v128H0z m0-128V320l256 192z"></path></svg>',menuKeys:["indent","delIndent"]},"|","emotion","insertLink","diygwimage","insertTable","codeBlock","divider","|","undo","redo","|","fullScreen"],_=C({name:"DiyEditor",components:{Editor:c,Toolbar:h,DiyStorage:v},props:{id:{type:String,default:()=>"wangeditor"},isDisable:{type:Boolean,default:()=>!1},placeholder:{type:String,default:()=>"请输入内容"},modelValue:String,mode:{type:String,default:()=>"default"},height:{type:String,default:()=>"300px"}},setup(e,{emit:n}){const m=S({storageCallback:"",uploadConfig:{limit:1}}),i=b(null),u=t=>{if(!t.length)return;const p=t[0];o.value.restoreSelection(),o.value.dangerouslyInsertHtml("<img src='"+p.url+"'/>")},g=y(e,"modelValue",n),o=z(),l={toolbarKeys:L},r={placeholder:e.placeholder};H(()=>{a.mittBus.off("onImageStoregeShow");const t=o.value;t!=null&&t.destroy()});const{proxy:a}=B();V(()=>{a.mittBus.on("onImageStoregeShow",()=>{i.value.handleStorageDlg("","上传图片")})});const f=t=>{o.value=t};return{...k(m),storage:i,editorRef:o,data:g,toolbarConfig:l,editorConfig:r,getAttachmentFileList:u,handleCreated:f}}}),$={style:{border:"1px solid #ccc"}};function I(e,n,m,i,u,g){const o=s("Toolbar"),l=s("Editor"),r=s("diy-storage");return w(),E("div",$,[d(o,{style:{"border-bottom":"1px solid #ccc"},editor:e.editorRef,defaultConfig:e.toolbarConfig,mode:e.mode},null,8,["editor","defaultConfig","mode"]),d(l,{style:M([{"overflow-y":"hidden"},{height:e.height}]),modelValue:e.data,"onUpdate:modelValue":n[0]||(n[0]=a=>e.data=a),defaultConfig:e.editorConfig,mode:e.mode,onOnCreated:e.handleCreated},null,8,["style","modelValue","defaultConfig","mode","onOnCreated"]),d(r,{ref:"storage",style:{display:"none"},limit:e.uploadConfig.limit,onConfirm:e.getAttachmentFileList},null,8,["limit","onConfirm"])])}const F=j(_,[["render",I]]);export{F as E};
