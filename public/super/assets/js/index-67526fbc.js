import{d as j,h as A,e as W,_ as Z,i as G,Z as H,ag as l,aq as C,o as c,c as x,V as t,P as a,a9 as P,F as J,a8 as X,O as d,T as p,Q as g,U as Y,S as ee,W as te,a as oe}from"./@vue-110897a1.js";import{_ as ae}from"./editModule.vue_vue_type_script_setup_true_lang-918b47a6.js";import{l as ne,k as le,n as re}from"./index-5e2104fc.js";import{E as q,a as ie}from"./element-plus-28d330eb.js";import"./pinia-cd41b998.js";import"./vue-router-17193735.js";import"./vue-i18n-c25bb36f.js";import"./@intlify-d9393dcf.js";import"./vue-cc729cf0.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-ff880098.js";import"./nprogress-28073a82.js";import"./axios-28bc18a3.js";import"./lodash-9a19cd29.js";import"./mitt-f7ef348c.js";import"./@wangeditor-231513dc.js";import"./vue-grid-layout-2853dde1.js";import"./lodash-es-21c98b27.js";import"./@vueuse-0a258a1c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-816b3f93.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-72afddb3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-432baded.js";const se={class:"container"},Ke=j({__name:"index",setup(ce){const{proxy:f}=A(),h=W(),e=Z({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,typeOptions:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0}}),i=()=>{e.loading=!0,ne("/sys/config",e.queryParams).then(o=>{e.tableData=o.rows,e.total=o.total,e.loading=!1})},k=()=>{e.queryParams.configName=void 0,e.queryParams.configName=void 0,e.queryParams.configType=void 0,i()},D=o=>f.selectDictLabel(e.typeOptions,o.configType),V=o=>{o=[],e.title="添加配置参数",h.value.openDialog(o)},T=o=>{e.title="修改配置参数",h.value.openDialog(o)},w=o=>{const r=o.configId||e.ids;q({message:'是否确认删除配置参数编号为"'+r+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return le("/sys/config",r).then(()=>{i(),ie.success("删除成功")})})},N=o=>{e.ids=o.map(r=>r.configId),e.single=o.length!=1,e.multiple=!o.length},B=()=>{const o=e.queryParams;q({message:"是否确认导出所有参数数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return re("/sys/config",o)}).then(r=>{f.download(r.data)})},S=o=>{e.queryParams.pageSize=o,i()},E=o=>{e.queryParams.pageNum=o,i()};return G(()=>{i(),f.getDicts("sys_yes_no").then(o=>{e.typeOptions=o.rows}),f.mittBus.on("onEditPostModule",o=>{i()})}),H(()=>{f.mittBus.off("onEditPostModule")}),(o,r)=>{const v=l("el-input"),y=l("el-form-item"),M=l("el-option"),z=l("el-select"),m=l("SvgIcon"),u=l("el-button"),I=l("el-form"),b=l("el-col"),K=l("el-row"),s=l("el-table-column"),O=l("el-tag"),U=l("el-table"),F=l("el-divider"),R=l("el-pagination"),L=l("el-card"),_=C("auth"),Q=C("loading");return c(),x("div",se,[t(L,{shadow:"always"},{default:a(()=>[t(I,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:a(()=>[t(y,{label:"参数名称",prop:"configName"},{default:a(()=>[t(v,{placeholder:"参数名称模糊查询",clearable:"",onKeyup:P(i,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configName,"onUpdate:modelValue":r[0]||(r[0]=n=>e.queryParams.configName=n)},null,8,["modelValue"])]),_:1}),t(y,{label:"参数键名",prop:"configKey"},{default:a(()=>[t(v,{placeholder:"参数键名模糊查询",clearable:"",onKeyup:P(i,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configKey,"onUpdate:modelValue":r[1]||(r[1]=n=>e.queryParams.configKey=n)},null,8,["modelValue"])]),_:1}),t(y,{label:"系统内置",prop:"configType"},{default:a(()=>[t(z,{modelValue:e.queryParams.configType,"onUpdate:modelValue":r[2]||(r[2]=n=>e.queryParams.configType=n),placeholder:"系统内置",clearable:"",style:{width:"240px"}},{default:a(()=>[(c(!0),x(J,null,X(e.typeOptions,n=>(c(),d(M,{key:n.dictValue,label:n.dictLabel,value:n.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:a(()=>[t(u,{type:"primary",onClick:i},{default:a(()=>[t(m,{name:"ele-Search"}),p(" 搜索 ")]),_:1}),t(u,{onClick:k},{default:a(()=>[t(m,{name:"ele-Refresh"}),p(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"]),t(K,{gutter:10,class:"mb8"},{default:a(()=>[t(b,{span:1.5},{default:a(()=>[g((c(),d(u,{type:"primary",plain:"",onClick:V},{default:a(()=>[t(m,{name:"ele-Plus"}),p("新增 ")]),_:1})),[[_,"system:config:add"]])]),_:1}),t(b,{span:1.5},{default:a(()=>[g((c(),d(u,{type:"danger",plain:"",disabled:e.multiple,onClick:w},{default:a(()=>[t(m,{name:"ele-Delete"}),p("删除 ")]),_:1},8,["disabled"])),[[_,"system:config:delete"]])]),_:1}),t(b,{span:1.5},{default:a(()=>[g((c(),d(u,{type:"warning",plain:"",onClick:B},{default:a(()=>[t(m,{name:"ele-Download"}),p("导出 ")]),_:1})),[[_,"system:config:export"]])]),_:1})]),_:1}),g((c(),d(U,{border:"",data:e.tableData,onSelectionChange:N},{default:a(()=>[t(s,{type:"selection",width:"55",align:"center"}),t(s,{label:"参数主键",align:"center",prop:"configId"}),t(s,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),t(s,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),t(s,{label:"参数键值",align:"center",prop:"configValue"}),t(s,{label:"系统内置",align:"center",prop:"configType"},{default:a(n=>[t(O,{type:n.row.configType==="1"?"danger":"success","disable-transitions":""},{default:a(()=>[p(Y(D(n.row)),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(s,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),t(s,{label:"操作",align:"center",fixed:"right",width:"180"},{default:a(n=>[g((c(),d(u,{type:"text",onClick:$=>T(n.row)},{default:a(()=>[t(m,{name:"ele-Edit"}),p("修改 ")]),_:2},1032,["onClick"])),[[_,"system:config:edit"]]),n.row.parentId!=0?g((c(),d(u,{key:0,type:"text",onClick:$=>w(n.row)},{default:a(()=>[t(m,{name:"ele-Delete"}),p("删除 ")]),_:2},1032,["onClick"])),[[_,"system:config:delete"]]):ee("",!0)]),_:1})]),_:1},8,["data"])),[[Q,e.loading]]),g(oe("div",null,[t(F),t(R,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:E},null,8,["total","current-page","page-size"])],512),[[te,e.total>0]])]),_:1}),t(ae,{ref_key:"editModuleRef",ref:h,title:e.title},null,8,["title"])])}}});export{Ke as default};
